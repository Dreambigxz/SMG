<app-spinner></app-spinner>
<app-header2></app-header2>

<div  class="mt-12 page-wrapper container">
	<!-- <div *ngIf="quickNav.storeData.store['active_users']" class="mt-12 page-wrapper container"> -->

    <div class="site-data mb-12">
      <div class="site-info">
        <div *ngIf="!quickNav.storeData.store['loaded_user']" class="item-card">
          <div class="item-row">
            <span class="label">Total Users</span>
            <span class="value">{{ quickNav.storeData.store['total_users'] }}</span>
          </div>
          <div class="item-row">
            <span class="label">Active Users</span>
            <span class="value">{{ quickNav.storeData.store['active_users'] }}</span>
          </div>

        </div>
      </div>
      <div *ngIf="quickNav.storeData.store['loaded_user']&&!loadNewUser"  class="loaded-user">

        <button class="w-50" (click)="loadNewUser=true" type="submit" name="button">
          Load new user
        </button>
        <div  *ngIf="quickNav.storeData.store['loaded_user'] as user" class="item-card">
          <div class="item-row">
            <span class="label">Username</span>
            <span class="value">{{ user.username }}</span>
          </div>
          <div class="item-row">
            <span class="label">Balance</span>
            <span class="value">${{ user.balance|number:"1.2-2" }}</span>
          </div>
          <div class="item-row">
            <span class="label">Total Deposit</span>
            <span class="value">${{ user.history.deposit|number:"1.2-2" }}</span>
          </div>
          <div class="item-row">
            <span class="label">Total Withdrawn</span>
            <span class="value">${{ user.history.withdraw|number:"1.2-2" }}</span>
          </div>
          <div class="item-row">
            <span class="label">Total Company Game Played</span>
            <span class="value">{{ user.bet_history.records?.true?.won?.count || 0 }}</span>
          </div>
          <div class="item-row">
            <span class="label">Total Bonus Game Played</span>
            <span class="value">{{ user.bet_history.records?.bonus?.won?.count || 0 }}</span>
          </div>
          <div class="item-row">
            <span class="label">Total Risk Game Played</span>
            <span class="value">{{ user.bet_history.records?.false?.won?.count || 0 }}</span>
          </div>
        </div>

        <div class="loaded-user-info">

          <!-- Prmotion view -->
          <app-referral-management *ngIf="selectedData==='promotion_info'"></app-referral-management>

        </div>

        <div  class="load-new-user">
          <p class="text-primary">
            select data to load!
          </p>

          <div class="load-user-form mt-2">

            <!-- <form (ngSubmit)="loadUserData()"> -->

              <select class="mb-3" (change)="changeSelectedData($event)" name="select-user-obj">
                  <option selected='selected' disabled=true>Select</option>
                  <option value="promotion_info">Load Invites</option>
                  <option data-prompt=amount value="credit_agent">Credit wallet</option>
                  <option data-prompt="amount" value="increase_agent_withdrawal_limit">Increase withdraw limit</option>
                  <option data-prompt="email" value="change_email">Change Email</option>
                  <option data-prompt="change-password" value="change_password">Change Password</option>
                  <option value="ban_user">Ban User</option>
                  <option value="unban_user">UnBan User</option>
                </select>

                <input [(ngModel)]="sendingData" *ngIf="['increase_agent_withdrawal_limit','credit_agent'].includes(selectedData)" type="number" placeholder="amount ">
                <input [(ngModel)]="sendingData" *ngIf="selectedData==='change_email'" type="text" placeholder="New Email">
                <div *ngIf="selectedData==='change_password'" class="set-new-pass">
                  <input [(ngModel)]="sendingData"  type="text" placeholder="New password">
                  <!-- <button type="button" name="button">Generate password</button> -->
                  <span (click)="sendingData=quickNav.generatePassword(6)" class="gen-pass-btn">Generate</span>
                </div>

              <button
              (click)="loadUserData()"
                type="submit"
                [disabled]="!selectedData"
                class="">Submit <i class="ti ti-arrow-right"></i>
              </button>
            <!-- </form> -->
          </div>

        </div>

      </div>
    </div>
        <div *ngIf="loadNewUser" class="load-new-user">
          <p class="text-warning">
            Load user you want to manage!
          </p>

          <div class="load-user-form mt-2">

            <!-- <form (ngSubmit)="handleSubmit()"> -->
                <input
                  [(ngModel)]="manageUser"
                  type="text" name=""
                  placeholder="Email / username"
                   >
              <button
                type="submit"
                (click)="getuserInfo()"
                [disabled]="!manageUser"
                class="">Submit <i class="ti ti-arrow-right"></i>
              </button>
            <!-- </form> -->
          </div>

        </div>
    </div>
